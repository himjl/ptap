<!doctype html>

<body>
Task page
</body>

<head>
    <script src="mts_task.js" type="text/javascript"></script>
    <script src="../common/mturk_submission.js" type="text/javascript"></script>
    <script src="../common/canvas.js" type="text/javascript"></script>
    <script src="../common/image_loading.js" type="text/javascript"></script>
    <script src="../common/subject_action.js" type="text/javascript"></script>
    <script src="../common/math_utils.js" type="text/javascript"></script>

    <script>
        // Extract session info
        var urlParams = new URLSearchParams(window.location.search);
        var workerId = urlParams.get('WorkerId');
        var assignmentId = urlParams.get('AssignmentId');
        var HITId = urlParams.get('HITId');

        // Assemble task info, possibly randomly on-load
        var usd_per_correct = 0.0025;

        var blue = 'https://milresources.s3.amazonaws.com/Images/AbstractShapes/bluediamond.png';
        var orange = 'https://milresources.s3.amazonaws.com/Images/AbstractShapes/orangediamond.png';


        var stimulus_duration_msec = 200;
        var reward_duration_msec = 100;
        var punish_duration_msec = 1000;
        var choice_duration_msec = 5000;
        var post_stimulus_delay_duration_msec = 0;


        var image_url_manifest = {
            'blue':[blue],
            'orange':[orange],
        };

        var block_manifest = {
            'test1':{
                'blue':{'matches':['blue'], 'distractors':['orange']}
            },
            'test2':{
                'orange':{'matches':['orange'], 'distractors':['blue']}
            },
        };

        var block_probabilities = {
           'test1':0.8,
            'test2':0.2,
        };

        // Run tasks

        (async function (){

            var size = 768;
            var ntrials = 10;
            var session_data = await run_mts_trials(
                ntrials,
                image_url_manifest,
                block_manifest,
                block_probabilities,
                stimulus_duration_msec,
                reward_duration_msec,
                punish_duration_msec,
                choice_duration_msec,
                post_stimulus_delay_duration_msec,
                size,
            );
            console.log(session_data);

        }());

    </script>
    <title>DiCarlo Lab - Mechanical Turk</title>
</head>


