<!doctype html>


<body>
Task page
</body>

<head>
    <script src="sr_task.js" type="text/javascript"></script>
    <script src="../common/mturk_submission.js" type="text/javascript"></script>
    <script src="../common/canvas.js" type="text/javascript"></script>
    <script src="../common/image_loading.js" type="text/javascript"></script>
    <script src="../common/subject_action.js" type="text/javascript"></script>
    <script src="../common/math_utils.js" type="text/javascript"></script>
    <script src="../common/instructions_splash.js" type="text/javascript"></script>

    <script>

        // Extract session info
        const url = window.location.href;
        var assignmentId = mechanical_turk_util_functions.get_assignmentId_from_url(url);
        var in_preview_mode = mechanical_turk_util_functions.detect_previewer(url);
        var in_sandbox = mechanical_turk_util_functions.detect_sandbox(url);



        // Assemble task info, possibly randomly on-load
        var blue = 'https://milresources.s3.amazonaws.com/Images/AbstractShapes/bluediamond.png';
        var orange = 'https://milresources.s3.amazonaws.com/Images/AbstractShapes/orangediamond.png';

        var image_url_sequence = [blue, blue, blue, orange];
        var label_sequence = [0, 0, 0, 1];
        var stimulus_duration_msec = 200;
        var reward_duration_msec = 100;
        var punish_duration_msec = 1000;
        var choice_duration_msec = 5000;
        var post_stimulus_delay_duration_msec = 0;

        // Run tasks
        var subtask_sequence = [
            {
                'image_url_seq':image_url_sequence,
                'label_seq':label_sequence,
                'stimulus_duration_msec':stimulus_duration_msec,
                'reward_duration_msec':reward_duration_msec,
                'punish_duration_msec':punish_duration_msec,
                'choice_duration_msec':choice_duration_msec,
                'post_stimulus_delay_duration_msec':post_stimulus_delay_duration_msec,
            },
            {
                'image_url_seq':image_url_sequence,
                'label_seq':label_sequence,
                'stimulus_duration_msec':stimulus_duration_msec,
                'reward_duration_msec':reward_duration_msec,
                'punish_duration_msec':punish_duration_msec,
                'choice_duration_msec':choice_duration_msec,
                'post_stimulus_delay_duration_msec':post_stimulus_delay_duration_msec,
            },
        ];

        // Execute the task
        (async function (){
            await run_instructions('instructions placeholder text', in_preview_mode);
            var session_data = await run_subtasks(subtask_sequence);
            await mechanical_turk_util_functions.submit_data(assignmentId, in_sandbox, session_data);
        }());

    </script>
    <title>DiCarlo Lab - Mechanical Turk</title>
</head>


